{% extends 'main_layout.html' %}
{% load static %}

{% block header %}
    <div class="container shadow p-5" style="border-radius: 30px; margin-bottom: 20px">
        <main>
            <div class="py-5 text-center mt-5">
                <h1 style="color: purple;">HolidayZ</h1>
                <h2>Travel Booking Details</h2>
                <p class="lead">Thank God! You are booking your holiday in Nepal!</p>
            </div>
            <form class="form" action="" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="row g-5">
                    <div class="col-md-5 col-lg-4 order-md-last">
                        <h4 class="d-flex justify-content-between align-items-center mb-3">
                            <span class="text-primary">Price Information</span>
                            <span class="badge bg-primary rounded-pill">Unpaid</span>
                        </h4>
                        <ul class="list-group mb-3">
                            {% for price in placed %}
                                <li class="list-group-item d-flex justify-content-between lh-sm">
                                    <div>
                                        <h6 class="my-0">Package Name</h6>
                                        <small class="text-muted">Price Details is Given:</small>
                                    </div>
                                    <span class="text-muted">$ {{ price.place.dest_price }}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between lh-sm">
                                    <div>
                                        <h6 class="my-0">Total Person</h6>
                                        <small class="text-muted">Tourist Counts</small>
                                    </div>
                                    <span class="text-muted">{{ price.total_person }}</span>
                                </li>

                                <li class="list-group-item d-flex justify-content-between">
                                    <span>Total (USD)</span>
                                    <strong>$ {% widthratio price.total_person 1 price.place.dest_price %}</strong>
                                </li>
                            {% endfor %}
                        </ul>
                        {% for card in placed %}
                            <div class="card textwhite bg-primary text-white shadow">
                                <div class="card-body">
                                    <p class="mb-2 text-center">Travel Card: {{ card.user.profile.ecard_no }}</p>
                                    <span class="badge bg-danger fs-5 w-100">Redemeed Automatically</span>
                                </div>
                            </div>

                        {% endfor %}
                    </div>
                    <div class="col-md-7 col-lg-8">

                        <div class="">
                            <h2>Your Choosen Package</h2>
                            <hr/>
                            {% for i in placed %}
                                <div class="card mb-3" style="width: 100%">
                                    <div class="row g-0">
                                        <div class="col-md-4">
                                            <img src="/{{ i.place.dest_image }}" class="img-fluid rounded-start"
                                                 alt="...">
                                        </div>
                                        <div class="col-md-8">
                                            <div class="card-body">
                                                <h5 class="card-title display-6 fw-bold d-flex justify-content-between">{{ i.place.dest_name }}
                                                    <button type="button" class="btn btn-primary">
                                                        $ {{ i.place.dest_price }}
                                                    </button>
                                                </h5>
                                                <p class="card-text fs-5">{{ i.place.dest_desc }}</p>
                                                <span class="badge bg-primary fs-5 w-100">Free Visa Processing</span>
                                                <div class="d-flex justify-content-between">
                                                    <p class="card-text fs-2 mt-2" style="padding-top: 20px;">
                                                        Country:<b>{{ i.place.country }}</p>
                                                    <button class="btn btn-danger btn-sm w-50"
                                                            onclick="window.location.href='/dashboard/deletebooking/{{ i.id }}'">
                                                        Delete
                                                    </button>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                        {% for i in placed %}
                            <h4 class="mb-3">Booking Information</h4>
                            <div class="row g-3">
                                <div class="col-sm-6">
                                    <label for="firstName" class="form-label">First name</label>
                                    <input type="text" class="form-control" id="firstName" placeholder=""
                                           value="{{ i.user.first_name }}" name="bookin_fname"
                                           required>
                                    <div class="invalid-feedback">
                                        Valid first name is required.
                                    </div>
                                </div>

                                <div class="col-sm-6">
                                    <label for="lastName" class="form-label">Last name</label>
                                    <input type="text" class="form-control" id="lastName" placeholder=""
                                           value="{{ i.user.last_name }}" name="bookin_lname"
                                           required>
                                    <div class="invalid-feedback">Valid last name is required.</div>
                                </div>


                                <div class="col-12">
                                    <label for="email" class="form-label">Email </label>
                                    <input type="email" class="form-control" id="email" placeholder="you@example.com"
                                           value="{{ i.user.email }}" name="bookin_email">
                                    <div class="invalid-feedback">Please enter a valid email address</div>
                                </div>

                                <div class="col-12">
                                    <label for="" class="form-label">Pick a date</label>
                                    <label for="birthday"></label><input class="form-control" type="date" id="birthday" name="bookin_date">
                                </div>

                                <div class="col-12">
                                    <label for="" class="form-label">Enter the number of person on your journey</label>
                                    <input type="number" class="form-control" id="email" placeholder="Enter the number" value="{{ i.total_person }}" name="bookin_totalperson">
                                    <div class="invalid-feedback">
                                        Please enter integer value
                                    </div>
                                </div>

                                <div class="col-12">
                                    <label for="address" class="form-label">Select your desired package</label>
                                    <select class="form-control w-100" id="inputGroupSelect03" name="bookin_offers">
                                        <option selected>Choose the package
                                        </option>
                                        {% for offer in offers %}
                                            <option value="{{ offer.id }}">{{ offer.offer_name }}</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <div class="col-md-5 w-100">
                                    <label for="address" class="form-label fw-bold">Showing included package</label>
                                    <table class="table table-striped">
                                        <thead>
                                        <tr>
                                            <th scope="col">Accomodation</th>
                                            <th scope="col">Adventure</th>
                                            <th scope="col">Extra Package</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <th scope="row">Hotels 3 rooms</th>
                                            <th scope="row">Cycling</th>
                                            <th scope="row">Free Pocket Gun</th>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <hr class="my-4">


                            <label for="address" class="form-label fw-bold">Add some review about journey
                                (Optional)</label>
                            <textarea class="form-control mb-3" id="Number"
                                      placeholder="Enter details about your journey" value=""
                                      name="bookin_desc"></textarea>

                        {% endfor %}

                    </div>
                </div>
                <button class="w-100 btn btn-primary" type="submit">Wohoo! Let's Book Your Holiday!</button>
            </form>

        </main>

    </div>
{% endblock %}